////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Pre Load Images
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

const preloadImages = () => {
	return new Promise((resolve, reject) => {
		imagesLoaded(document.querySelectorAll("img"), resolve);
	});
};
// then
preloadImages().then(() => {
	// remove loader
	document.body.classList.remove("loading");

	// Run the Page Animation
	initWorkDetailsPageAnimation();
});

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Title Reveal Aniamtions
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

function titleReveal() {
	const title = selectAll(".work-temp-title-text");
	const brief = select(".work-temp-desc-text");

	const briefSplit = new SplitText(brief, { type: "chars lines words", linesClass: "briefChild" });
	new SplitText(brief, { type: "chars lines words", linesClass: "briefParent" });

	gsap.set(".new-work-temp-content", { autoAlpha: 1 });

	const tl = gsap.timeline({ id: "tl", defaults: { duration: 1.34, ease: "myEaseSmooth" } });

	tl.from(title, { y: 233, stagger: 0.13 });
	tl.from(briefSplit.lines, { y: 89, stagger: 0.13 }, "<");

	return tl;
}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Hero Reveal Aniamtions
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

function heroImageReveal() {
	const image = select(".work-temp-image");
	const imageMask = select(".work-temp-image-wrap");

	const tl = gsap.timeline({ id: "tl", defaults: { duration: 1.34, ease: "myEaseSmooth" } });

	tl.from(image, { xPercent: 110, scale: 1.3, opacity: 0 });
	tl.from(imageMask, { xPercent: -101 }, "<");

	return tl;
}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Load all aniamtions
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

function initWorkDetailsPageAnimation() {
	setTimeout(function () {
		titleReveal();
		heroImageReveal();
	}, 1200);
}
